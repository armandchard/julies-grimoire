<div class="row border-bottom white-bg page-heading">
  <div class="col-md-2">
    <label>{{'SELECT_INTERVAL' | translate}} </label>
    <input date-range-picker class="form-control date-picker" type="text" ng-model="vm.datePicker.date" options="vm.options"/>
  </div>
  <div class="col-md-4">
    <label>{{'SELECT_PERIOD' | translate}}</label>
    <div>
      <button class="btn btn-primary btn-outline" ng-click="vm.selectPeriod('month')">{{'MONTH' | translate}}</button>
      <button class="btn btn-primary btn-outline" ng-click="vm.selectPeriod('week')">{{'WEEK' | translate}}</button>
      <button class="btn btn-primary btn-outline" ng-click="vm.selectPeriod('day')">{{'DAY' | translate}}</button>
    </div>
  </div>
</div>
<div class="wrapper-content animated fadeInRight">
  <div class="row" ng-if="vm.loading">
    <div class="panel-body">
      <div class="sk-spinner sk-spinner-three-bounce">
        <div class="sk-bounce1"></div>
        <div class="sk-bounce2"></div>
        <div class="sk-bounce3"></div>
      </div>
    </div>
  </div>
  <div class="row" ng-if="!vm.loading">
    <div class="col-lg-3">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <span class="label label-success pull-right">{{vm.periodLabel}}</span>
          <h5>{{'TURNOVER' | translate}}</h5>
        </div>
        <div class="ibox-content">
          <h1 class="no-margins">{{vm.ca | currency}}</h1>
          <small>{{'TURNOVER_HT' | translate}}</small>
        </div>
      </div>
    </div>
    <div class="col-lg-3">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <span class="label label-success pull-right">{{vm.periodLabel}}</span>
          <h5>{{'SALES' | translate}}</h5>
        </div>
        <div class="ibox-content">
          <h1 class="no-margins">{{vm.quantity}}</h1>
          <small>{{'TOTAL_SALES' | translate}}</small>
        </div>
      </div>
    </div>
    <div class="col-lg-3">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <span class="label label-success pull-right">{{vm.periodLabel}}</span>
          <h5>{{'BASKET_VALUE' | translate}}</h5>
        </div>
        <div class="ibox-content">
          <h1 class="no-margins">{{vm.meanCart | currency}}</h1>
          <small>{{'BASKET_VALUE_TTC' | translate}}</small>
        </div>
      </div>
    </div>
    <div class="col-lg-3">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <span class="label label-success pull-right">{{vm.periodLabel}}</span>
          <h5>{{'CUSTOMERS' | translate}}</h5>
        </div>
        <div class="ibox-content">
          <h1 class="no-margins">{{vm.totalClient}}</h1>
          <small>{{'LEGEND_TOTAL_SALES' | translate}}</small>
        </div>
      </div>
    </div>
  </div>
  <div class="row" ng-if="!vm.loading">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h5>{{'SALES' | translate}}</h5>
          <div class="pull-right">
            <span class="label label-success pull-right">{{vm.periodLabel}}</span>
          </div>
        </div>
        <div class="ibox-content">
          <div class="row">
            <div class="col-lg-9">
              <div class="flot-chart">
                <flot class="flot-chart-content" dataset="vm.flotData" options="vm.flotOptions"></flot>
              </div>
            </div>
            <div class="col-lg-3">
              <ul class="stat-list">
                <li>
                  <h2 class="no-margins">{{vm.quantity}}</h2>
                  <small>{{'LEGEND_TOTAL_SALES' | translate}}</small>
                </li>
                <li>
                  <h2 class="no-margins ">{{vm.meanCart | currency}}</h2>
                  <small>{{'LEGEND_BASKET' | translate}}</small>
                </li>
                <li>
                  <h2 class="no-margins ">{{vm.ca | currency}}</h2>
                  <small>{{'LEGEND_TOTAL_TURNOVER' | translate}}</small>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row" ng-if="!vm.loading">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h5>{{'TITLE_SALES_BY_SUPPLIERS' | translate}}</h5>
          <div ibox-tools></div>
        </div>
        <div class="ibox-content">
          <div class="table-responsive" ng-if="!vm.loading">
              <table class="footable table table-stripped toggle-arrow-tiny" data-page-size="50">
                <thead>
                  <tr>
                    <th>{{'HEADER_BRAND' | translate}}</th>
                    <th data-sort-initial="true" data-type="numeric">{{'HEADER_TURNOVER' | translate}}</th>
                    <th>{{'HEADER_TOTAL_SALES' | translate}}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="supplier in vm.suppliersCA">
                    <td>{{supplier.name}}</td>
                    <td>{{supplier.ca | currency}}</td>
                    <td>{{supplier.quantity}}</td>
                  </tr>
                </tbody>
                <tfoot>
                  <tr>
                    <td colspan="3" align="right">
                      <ul class="pagination hide-if-no-paging"></ul>
                    </td>
                  </tr>
                </tfoot>
              </table>
            </div>
          <!--<div class="table-responsive" ng-if="!vm.loading">
            <table datatable="ng" dt-options="vm.dtOptions" class="table table-striped table-bordered table-hover dataTables-example">
              <thead>
                <tr>
                  <th>{{'PRODUCT_NAMETABLE' | translate}}</th>
                  <th>Visuel</th>
                  <th>{{'PRODUCT_BRANDTABLE' | translate}}</th>
                  <th>Date</th>
                  <th>Prix unitaire HT</th>
                  <th>Quantité</th>
                  <th>Prix total HT</th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="sale in vm.sales | orderBy: '-sale.sale_date'">
                  <td>{{::sale.product.name}}
                    <p ng-if="sale.product.supplier_code">Référence interne: {{::sale.product.supplier_code}}</p>
                  </td>
                  <td class="text-center">
                    <img ng-if="sale.product.images.length === 0" class="thumbnail-print" ng-src="{{::sale.product.image}}">
                    <img ng-if="sale.product.images.length > 0" class="thumbnail-print" ng-src="{{::sale.product.images[0].links.thumb}}">
                  </td>
                  <td>{{::sale.product.brand_name}}</td>
                  <td>{{::sale.sale.sale_date | date:'dd/MM/yyyy HH:mm'}}</td>
                  <td>{{::sale.register_sale.price | number:2}}</td>
                  <td>{{::sale.register_sale.quantity}}</td>
                  <td>{{::sale.register_sale.price_total | number:2}}</td>
                </tr>
              </tbody>
            </table>
          </div>-->
        </div>
      </div>
    </div>
  </div>
</div>
